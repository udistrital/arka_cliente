<mat-card-title>
   {{'GLOBAL.Comprobante_Contable.Titulo' | translate}}
</mat-card-title>
<div class="row">
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Consecutivo' |
            translate}}</strong>:{{consecutivo}}</p>
   </div>
</div>

<div class="row">
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Concepto' | translate}}</strong>
         : {{transaccion.Descripcion}}</p>
   </div>
</div>

<div class="row">
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.FechaTransaccion' | translate}}</strong>
         : {{transaccion.FechaTransaccion | date: 'dd/MM/yyyy'}}</p>
   </div>
</div>
<div class="row">
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Secuencia' | translate}}</strong></p>
   </div>
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Tercero' | translate}}</strong></p>
   </div>
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Cuenta' | translate}}</strong></p>
   </div>
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.NombreCuenta' | translate}}</strong></p>
   </div>
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Descripcion' | translate}}</strong></p>
   </div>
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Debito' | translate}}</strong></p>
   </div>
   <div class="col">
      <p class="text-uppercase"><strong>{{'GLOBAL.Comprobante_Contable.Credito' | translate}}</strong></p>
   </div>
</div>


<div class="row" *ngFor="let mvto of transaccion.movimientos; let i= index;">
   <div class="col">
      <p class="text-uppercase">{{[i+1]}}</p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{tercero.Numero}}</p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{mvto.CuentaId}}</p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{mvto.NombreCuenta}}</p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{mvto.Descripcion}}</p>
   </div>
   <div class="col" *ngIf="mvto.TipoMovimientoId==m_db">
      <p class="text-uppercase">{{mvto.Valor | currency}}</p>
   </div>
   <div class="col" *ngIf="mvto.TipoMovimientoId==m_cr">
      <p class="text-uppercase">0</p>
   </div>
   <div class="col" *ngIf="mvto.TipoMovimientoId==m_cr">
      <p class="text-uppercase">{{mvto.Valor | currency}}</p>
   </div>
   <div class="col" *ngIf="mvto.TipoMovimientoId==m_db">
      <p class="text-uppercase">0</p>
   </div>
</div>


<div class="row">
   <div class="col">
      <p class="text-uppercase"></p>
   </div>
   <div class="col">
      <p class="text-uppercase"></p>
   </div>
   <div class="col">
      <p class="text-uppercase"></p>
   </div>
   <div class="col">
      <p class="text-uppercase"></p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{'GLOBAL.Comprobante_Contable.Total' | translate}}</p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{totalDebitos | currency}}</p>
   </div>
   <div class="col">
      <p class="text-uppercase">{{totalCreditos | currency}}</p>
   </div>
</div>

<form [formGroup]="formComprobante">
   <mat-table [dataSource]="dataSource" formArrayName="elementos" matSort>
      <ng-container matColumnDef="acciones">
         <th id="col-acciones" mat-header-cell *matHeaderCellDef class="acciones">
            <button mat-icon-button color="primary" [disabled]="modo === 'get'" (click)="addElemento()"
               matTooltip="{{'GLOBAL.Acta_Recibido.CapturarElementos.AgregarElemento' | translate }}">
               <mat-icon>add_box</mat-icon>
            </button>
         </th>
         <td mat-cell *matCellDef="let element; let rowIndex = index" class="acciones">
            <button mat-icon-button color="secondary" [disabled]="modo === 'get'" (click)="removeElemento(rowIndex)"
               matTooltip="{{'GLOBAL.Acta_Recibido.CapturarElementos.EliminarElemento' | translate }}">
               <mat-icon>delete_outline</mat-icon>
            </button>
         </td>
      </ng-container>

      <ng-container matColumnDef="secuencia">
         <th id="secuencia" mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'GLOBAL.Comprobante_Contable.Secuencia' | translate }}
         </th>
         <td mat-cell *matCellDef="let element; let i = index" style="text-align: center;">{{getActualIndex(i) + 1}}</td>
      </ng-container>

      <ng-container matColumnDef="cuenta">
         <th id="cuenta" mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'GLOBAL.Comprobante_Contable.Cuenta' | translate }}
         </th>
         <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
            <mat-form-field appearance="outline" style="width: 400px;">
               <input matInput type="text" formControlName="cuenta"
                  placeholder="{{'GLOBAL.Errores.ErrorMinLength' | translate : {NUM : 4} }}"
                  [matAutocomplete]="autoElementos">
               <mat-autocomplete #autoElementos="matAutocomplete" [displayWith]="muestraCuenta"
                  (optionSelected)="fillElemento(getActualIndex(rowIndex))">
                  <mat-option *ngFor="let cta of cuentasFiltradas" [value]="cta">
                     {{muestraCuenta(cta)}}
                  </mat-option>
               </mat-autocomplete>
               <mat-error>* {{'GLOBAL.Errores.ErrorRequerido' | translate}}</mat-error>
            </mat-form-field>
         </td>
      </ng-container>

      <ng-container matColumnDef="descripcion">
         <th id="debito" mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'GLOBAL.Comprobante_Contable.Descripcion' | translate }}
         </th>
         <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
            <mat-form-field appearance="outline" style="width: 250px;">
               <input matInput type="text" formControlName="descripcion">
            </mat-form-field>
         </td>
      </ng-container>

      <ng-container matColumnDef="debito">
         <th id="debito" mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'GLOBAL.Comprobante_Contable.Debito' | translate }}
         </th>
         <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
            <mat-form-field appearance="outline" style="width: 150px;">
               <input matInput currencyMask [options]="{allowNegative: false}" type="text" formControlName="debito">
               <mat-error>* {{'GLOBAL.Errores.NoNulo' | translate}}</mat-error>
            </mat-form-field>
         </td>
      </ng-container>

      <ng-container matColumnDef="credito">
         <th id="credito" mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ 'GLOBAL.Comprobante_Contable.Credito' | translate }}
         </th>
         <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
            <mat-form-field appearance="outline" style="width: 150px;">
               <input matInput currencyMask [options]="{allowNegative: false}" type="text" formControlName="credito">
               <mat-error>* {{'GLOBAL.Errores.NoNulo' | translate}}</mat-error>
            </mat-form-field>
         </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
   </mat-table>
   <mat-paginator #paginator [pageSizeOptions]="[10, 25, 50]"></mat-paginator>
</form>
