<mat-vertical-stepper [nbSpinner]="!load" [linear]="true" #stepper>
  <mat-step [stepControl]="formBaja.get('elementos')" label="{{'GLOBAL.elementos' | translate}}">
    <form [formGroup]="formBaja">
      <div class="tabla-container">
        <mat-table #table [dataSource]="dataSource" formArrayName="elementos" matSort>
          <ng-container matColumnDef="acciones">
            <th id="col-acciones" mat-header-cell *matHeaderCellDef class="acciones">
              <button mat-icon-button color="primary" [disabled]="modo !== 'create'" (click)="addElemento()"
                matTooltip="{{'GLOBAL.Acta_Recibido.CapturarElementos.AgregarElemento' | translate }}">
                <mat-icon>add_box</mat-icon>
              </button>
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" class="acciones">
              <button mat-icon-button color="secondary" [disabled]="modo !== 'create'" (click)="removeElemento(rowIndex)"
                matTooltip="{{'GLOBAL.Acta_Recibido.CapturarElementos.EliminarElemento' | translate }}">
                <mat-icon>delete_outline</mat-icon>
              </button>
            </td>
          </ng-container>

          <ng-container matColumnDef="placa">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input type="text" formControlName="placa" class="form-control"
                placeholder="{{'GLOBAL.Errores.ErrorMinLength' | translate : {NUM : 5} }}" [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete" [displayWith]="muestraDependencia"
                (optionSelected)="getDetalleElemento(getActualIndex(rowIndex))">
                <mat-option *ngFor="let item of dependencias" [value]="item">
                  {{item.Placa}}
                </mat-option>
              </mat-autocomplete>
            </td>
          </ng-container>

          <ng-container matColumnDef="nombre">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="nombre"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="marca">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="marca"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="subgrupo">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="subgrupo"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="tipoBien">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="tipoBien"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="entrada">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="entrada"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="salida">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="salida"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="sede">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="sede"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="dependencia">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="dependencia"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="ubicacion">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="ubicacion"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>
          <ng-container matColumnDef="funcionario">
            <th id="placa" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{ 'GLOBAL.Nombre' | translate }}
            </th>
            <td mat-cell *matCellDef="let element; let rowIndex = index" [formGroupName]="getActualIndex(rowIndex)">
              <input  type="text" class="form-control" formControlName="funcionario"
                placeholder="{{'GLOBAL.Nombre' | translate }}">
            </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </mat-table>
        <mat-paginator #paginator [pageSizeOptions]="[10, 25, 50]"></mat-paginator>
      </div>
      <div class="botones">
        <button mat-flat-button color="primary" matStepperPrevious class="float-left text-uppercase">
          {{'GLOBAL.anterior' | translate}}
        </button>
        <button mat-flat-button color="primary" matStepperNext class="float-right text-uppercase"
          [disabled]="formBaja.get('elementos').invalid">
          {{'GLOBAL.siguiente' | translate}}
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="formBaja.get('observaciones')" label="{{'GLOBAL.observaciones' | translate}}">
    <form [formGroup]="formBaja.get('observaciones')">
      <div class="row">
        <div class="form-group col-sm">
          <label>{{'GLOBAL.Acta_Recibido.RegistroActa.Observaciones' | translate}}</label>
          <div class="input-group">
            <textarea rows="5" placeholder="{{'GLOBAL.Acta_Recibido.RegistroActa.Observaciones2' | translate}}"
              class="form-control" formControlName="observaciones">
              </textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm">
          <button mat-flat-button color="primary" matStepperPrevious class="float-left text-uppercase">
            {{'GLOBAL.anterior' | translate}}
          </button>
        </div>
      </div>
    </form>
  </mat-step>
</mat-vertical-stepper>
